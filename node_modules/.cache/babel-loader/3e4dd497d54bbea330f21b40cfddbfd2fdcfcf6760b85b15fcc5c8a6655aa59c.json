{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\arunk\\\\Downloads\\\\createxyz-project\\\\ract\\\\audio-recorder\\\\src\\\\AudioRecorder.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { FaMicrophone, FaMicrophoneSlash, FaPlay, FaSpinner } from 'react-icons/fa';\nimport { AUDIO_CONFIG } from './config/constants';\nimport './AudioRecorder.css';\nimport { convertToWav } from './utils/audioConverter';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AudioRecorder = () => {\n  _s();\n  var _transcription$durati, _transcription$proces, _transcription$tts_ti;\n  const [isRecording, setIsRecording] = useState(false);\n  const [audioChunks, setAudioChunks] = useState([]);\n  const [silenceDetected, setSilenceDetected] = useState(false);\n  const [silenceStartTime, setSilenceStartTime] = useState(null);\n  const [transcription, setTranscription] = useState(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [sessionId, setSessionId] = useState(null);\n  const [progress, setProgress] = useState('');\n  const mediaRecorderRef = useRef(null);\n  const streamRef = useRef(null);\n  const analyserRef = useRef(null);\n  const audioContextRef = useRef(null);\n  const silenceTimeoutRef = useRef(null);\n  const audioPlayerRef = useRef(null);\n  const startRecording = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: true\n      });\n      streamRef.current = stream;\n      const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n      audioContextRef.current = audioContext;\n      const analyser = audioContext.createAnalyser();\n      analyserRef.current = analyser;\n      analyser.smoothingTimeConstant = AUDIO_CONFIG.SMOOTHING_TIME_CONSTANT;\n      analyser.fftSize = 2048;\n      const source = audioContext.createMediaStreamSource(stream);\n      source.connect(analyser);\n\n      // Get supported MIME type\n      const mimeType = ['audio/webm;codecs=opus', 'audio/webm', 'audio/ogg;codecs=opus', 'audio/ogg'].find(type => MediaRecorder.isTypeSupported(type));\n      if (!mimeType) {\n        throw new Error('No supported media recording MIME type found');\n      }\n      const mediaRecorder = new MediaRecorder(stream, {\n        mimeType,\n        audioBitsPerSecond: 128000\n      });\n      mediaRecorderRef.current = mediaRecorder;\n      mediaRecorder.ondataavailable = event => {\n        if (event.data.size > 0) {\n          setAudioChunks(prevChunks => [...prevChunks, event.data]);\n        }\n      };\n      mediaRecorder.start(AUDIO_CONFIG.CHUNK_INTERVAL);\n      setIsRecording(true);\n      monitorAudioLevel();\n    } catch (err) {\n      console.error(\"Error accessing microphone:\", err);\n      alert('Error accessing microphone. Please check permissions.');\n    }\n  };\n  const stopRecording = () => {\n    if (mediaRecorderRef.current && streamRef.current) {\n      mediaRecorderRef.current.stop();\n      streamRef.current.getTracks().forEach(track => track.stop());\n      if (audioChunks.length > 0) {\n        saveAndSendAudio(audioChunks);\n      }\n      clearTimeout(silenceTimeoutRef.current);\n      setIsRecording(false);\n      setSilenceDetected(false);\n      setSilenceStartTime(null);\n      setAudioChunks([]);\n      if (audioContextRef.current) {\n        audioContextRef.current.close();\n      }\n    }\n  };\n  const toggleRecording = () => {\n    if (isRecording) {\n      stopRecording();\n    } else {\n      startRecording();\n    }\n  };\n  const monitorAudioLevel = () => {\n    if (!analyserRef.current || !isRecording) return;\n    const dataArray = new Uint8Array(analyserRef.current.frequencyBinCount);\n    analyserRef.current.getByteFrequencyData(dataArray);\n    const average = dataArray.reduce((a, b) => a + b, 0) / dataArray.length;\n    const dB = 20 * Math.log10(average / 255);\n    if (dB < AUDIO_CONFIG.SILENCE_THRESHOLD) {\n      if (!silenceDetected) {\n        setSilenceDetected(true);\n        setSilenceStartTime(Date.now());\n      } else if (Date.now() - silenceStartTime > AUDIO_CONFIG.SILENCE_DURATION) {\n        saveAndSendAudio(audioChunks);\n        setSilenceStartTime(Date.now());\n      }\n    } else {\n      setSilenceDetected(false);\n      setSilenceStartTime(null);\n    }\n    requestAnimationFrame(monitorAudioLevel);\n  };\n  const saveAndSendAudio = async chunks => {\n    if (!chunks || chunks.length === 0) return;\n    try {\n      var _audioContextRef$curr;\n      setIsLoading(true);\n      setProgress('Converting audio to WAV format...');\n      const wavBlob = await convertToWav(chunks, ((_audioContextRef$curr = audioContextRef.current) === null || _audioContextRef$curr === void 0 ? void 0 : _audioContextRef$curr.sampleRate) || AUDIO_CONFIG.SAMPLE_RATE);\n      setProgress('Sending audio to server...');\n      const formData = new FormData();\n      formData.append('audio', wavBlob, `recording.wav`);\n      const response = await fetch(`${AUDIO_CONFIG.BACKEND_URL}${AUDIO_CONFIG.API_ENDPOINTS.UPLOAD}`, {\n        method: 'POST',\n        body: formData\n      });\n      if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);\n      const result = await response.json();\n      if (result.session_id) {\n        setSessionId(result.session_id);\n        setProgress('Processing audio...');\n        await pollTranscription(result.session_id);\n      }\n      setAudioChunks([]);\n    } catch (error) {\n      console.error('Error:', error);\n      setProgress('Error processing audio');\n    } finally {\n      setIsLoading(false);\n      setTimeout(() => setProgress(''), 3000); // Clear progress after 3 seconds\n    }\n  };\n  const pollTranscription = async sid => {\n    try {\n      const response = await fetch(`${AUDIO_CONFIG.BACKEND_URL}${AUDIO_CONFIG.API_ENDPOINTS.TRANSCRIPTION}/${sid}`);\n      if (response.ok) {\n        const data = await response.json();\n        setTranscription(data);\n        setProgress(`Transcription completed in ${data.processing_time.toFixed(2)}s\\nTTS generated in ${data.tts_time.toFixed(2)}s`);\n      }\n    } catch (error) {\n      console.error('Error fetching transcription:', error);\n      setProgress('Error fetching transcription');\n    }\n  };\n  const playTTSAudio = async () => {\n    if (!(transcription !== null && transcription !== void 0 && transcription.tts_audio)) return;\n    try {\n      if (!audioPlayerRef.current) {\n        const audioUrl = `${AUDIO_CONFIG.BACKEND_URL}${AUDIO_CONFIG.API_ENDPOINTS.TTS}/${transcription.tts_audio}`;\n        audioPlayerRef.current = new Audio(audioUrl);\n      }\n      setIsPlaying(true);\n      await audioPlayerRef.current.play();\n      audioPlayerRef.current.onended = () => {\n        setIsPlaying(false);\n      };\n    } catch (error) {\n      console.error('Error playing TTS:', error);\n      setIsPlaying(false);\n    }\n  };\n  useEffect(() => {\n    return () => {\n      if (isRecording) {\n        stopRecording();\n      }\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"audio-recorder\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      className: `record-button ${isRecording ? 'recording' : ''}`,\n      onClick: toggleRecording,\n      children: isRecording ? /*#__PURE__*/_jsxDEV(FaMicrophoneSlash, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 24\n      }, this) : /*#__PURE__*/_jsxDEV(FaMicrophone, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 48\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"status\",\n      children: isRecording ? /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"recording-indicator\",\n        children: [\"Recording \", silenceDetected ? '(Silence detected)' : '']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"Click to start recording\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 7\n    }, this), progress && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"progress-info\",\n      children: progress\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 9\n    }, this), transcription && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"transcription-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"processing-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Audio Duration: \", (_transcription$durati = transcription.duration) === null || _transcription$durati === void 0 ? void 0 : _transcription$durati.toFixed(2), \"s\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Processing Time: \", (_transcription$proces = transcription.processing_time) === null || _transcription$proces === void 0 ? void 0 : _transcription$proces.toFixed(2), \"s\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"TTS Generation Time: \", (_transcription$tts_ti = transcription.tts_time) === null || _transcription$tts_ti === void 0 ? void 0 : _transcription$tts_ti.toFixed(2), \"s\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"transcription-text\",\n        children: transcription.text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `tts-button ${isPlaying ? 'playing' : ''}`,\n        onClick: playTTSAudio,\n        disabled: isPlaying || isLoading,\n        children: [isLoading ? /*#__PURE__*/_jsxDEV(FaSpinner, {\n          className: \"spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 26\n        }, this) : /*#__PURE__*/_jsxDEV(FaPlay, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 62\n        }, this), isPlaying ? 'Playing...' : 'Play TTS']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 209,\n    columnNumber: 5\n  }, this);\n};\n_s(AudioRecorder, \"0XmZS9vWED7Co0SIOuMvLB8wsKs=\");\n_c = AudioRecorder;\nexport default AudioRecorder;\nvar _c;\n$RefreshReg$(_c, \"AudioRecorder\");","map":{"version":3,"names":["React","useState","useRef","useEffect","FaMicrophone","FaMicrophoneSlash","FaPlay","FaSpinner","AUDIO_CONFIG","convertToWav","jsxDEV","_jsxDEV","AudioRecorder","_s","_transcription$durati","_transcription$proces","_transcription$tts_ti","isRecording","setIsRecording","audioChunks","setAudioChunks","silenceDetected","setSilenceDetected","silenceStartTime","setSilenceStartTime","transcription","setTranscription","isPlaying","setIsPlaying","isLoading","setIsLoading","sessionId","setSessionId","progress","setProgress","mediaRecorderRef","streamRef","analyserRef","audioContextRef","silenceTimeoutRef","audioPlayerRef","startRecording","stream","navigator","mediaDevices","getUserMedia","audio","current","audioContext","window","AudioContext","webkitAudioContext","analyser","createAnalyser","smoothingTimeConstant","SMOOTHING_TIME_CONSTANT","fftSize","source","createMediaStreamSource","connect","mimeType","find","type","MediaRecorder","isTypeSupported","Error","mediaRecorder","audioBitsPerSecond","ondataavailable","event","data","size","prevChunks","start","CHUNK_INTERVAL","monitorAudioLevel","err","console","error","alert","stopRecording","stop","getTracks","forEach","track","length","saveAndSendAudio","clearTimeout","close","toggleRecording","dataArray","Uint8Array","frequencyBinCount","getByteFrequencyData","average","reduce","a","b","dB","Math","log10","SILENCE_THRESHOLD","Date","now","SILENCE_DURATION","requestAnimationFrame","chunks","_audioContextRef$curr","wavBlob","sampleRate","SAMPLE_RATE","formData","FormData","append","response","fetch","BACKEND_URL","API_ENDPOINTS","UPLOAD","method","body","ok","status","result","json","session_id","pollTranscription","setTimeout","sid","TRANSCRIPTION","processing_time","toFixed","tts_time","playTTSAudio","tts_audio","audioUrl","TTS","Audio","play","onended","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","duration","text","disabled","_c","$RefreshReg$"],"sources":["C:/Users/arunk/Downloads/createxyz-project/ract/audio-recorder/src/AudioRecorder.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { FaMicrophone, FaMicrophoneSlash, FaPlay, FaSpinner } from 'react-icons/fa';\r\nimport { AUDIO_CONFIG } from './config/constants';\r\nimport './AudioRecorder.css';\r\nimport { convertToWav } from './utils/audioConverter';\r\n\r\nconst AudioRecorder = () => {\r\n  const [isRecording, setIsRecording] = useState(false);\r\n  const [audioChunks, setAudioChunks] = useState([]);\r\n  const [silenceDetected, setSilenceDetected] = useState(false);\r\n  const [silenceStartTime, setSilenceStartTime] = useState(null);\r\n  const [transcription, setTranscription] = useState(null);\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [sessionId, setSessionId] = useState(null);\r\n  const [progress, setProgress] = useState('');\r\n  \r\n  const mediaRecorderRef = useRef(null);\r\n  const streamRef = useRef(null);\r\n  const analyserRef = useRef(null);\r\n  const audioContextRef = useRef(null);\r\n  const silenceTimeoutRef = useRef(null);\r\n  const audioPlayerRef = useRef(null);\r\n\r\n  const startRecording = async () => {\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\r\n      streamRef.current = stream;\r\n      \r\n      const audioContext = new (window.AudioContext || window.webkitAudioContext)();\r\n      audioContextRef.current = audioContext;\r\n      \r\n      const analyser = audioContext.createAnalyser();\r\n      analyserRef.current = analyser;\r\n      analyser.smoothingTimeConstant = AUDIO_CONFIG.SMOOTHING_TIME_CONSTANT;\r\n      analyser.fftSize = 2048;\r\n      \r\n      const source = audioContext.createMediaStreamSource(stream);\r\n      source.connect(analyser);\r\n      \r\n      // Get supported MIME type\r\n      const mimeType = [\r\n        'audio/webm;codecs=opus',\r\n        'audio/webm',\r\n        'audio/ogg;codecs=opus',\r\n        'audio/ogg'\r\n      ].find(type => MediaRecorder.isTypeSupported(type));\r\n      \r\n      if (!mimeType) {\r\n        throw new Error('No supported media recording MIME type found');\r\n      }\r\n      \r\n      const mediaRecorder = new MediaRecorder(stream, {\r\n        mimeType,\r\n        audioBitsPerSecond: 128000\r\n      });\r\n      mediaRecorderRef.current = mediaRecorder;\r\n      \r\n      mediaRecorder.ondataavailable = (event) => {\r\n        if (event.data.size > 0) {\r\n          setAudioChunks((prevChunks) => [...prevChunks, event.data]);\r\n        }\r\n      };\r\n      \r\n      mediaRecorder.start(AUDIO_CONFIG.CHUNK_INTERVAL);\r\n      setIsRecording(true);\r\n      monitorAudioLevel();\r\n      \r\n    } catch (err) {\r\n      console.error(\"Error accessing microphone:\", err);\r\n      alert('Error accessing microphone. Please check permissions.');\r\n    }\r\n  };\r\n\r\n  const stopRecording = () => {\r\n    if (mediaRecorderRef.current && streamRef.current) {\r\n      mediaRecorderRef.current.stop();\r\n      streamRef.current.getTracks().forEach(track => track.stop());\r\n      \r\n      if (audioChunks.length > 0) {\r\n        saveAndSendAudio(audioChunks);\r\n      }\r\n      \r\n      clearTimeout(silenceTimeoutRef.current);\r\n      setIsRecording(false);\r\n      setSilenceDetected(false);\r\n      setSilenceStartTime(null);\r\n      setAudioChunks([]);\r\n      \r\n      if (audioContextRef.current) {\r\n        audioContextRef.current.close();\r\n      }\r\n    }\r\n  };\r\n\r\n  const toggleRecording = () => {\r\n    if (isRecording) {\r\n      stopRecording();\r\n    } else {\r\n      startRecording();\r\n    }\r\n  };\r\n\r\n  const monitorAudioLevel = () => {\r\n    if (!analyserRef.current || !isRecording) return;\r\n    \r\n    const dataArray = new Uint8Array(analyserRef.current.frequencyBinCount);\r\n    analyserRef.current.getByteFrequencyData(dataArray);\r\n    \r\n    const average = dataArray.reduce((a, b) => a + b, 0) / dataArray.length;\r\n    const dB = 20 * Math.log10(average / 255);\r\n    \r\n    if (dB < AUDIO_CONFIG.SILENCE_THRESHOLD) {\r\n      if (!silenceDetected) {\r\n        setSilenceDetected(true);\r\n        setSilenceStartTime(Date.now());\r\n      } else if (Date.now() - silenceStartTime > AUDIO_CONFIG.SILENCE_DURATION) {\r\n        saveAndSendAudio(audioChunks);\r\n        setSilenceStartTime(Date.now());\r\n      }\r\n    } else {\r\n      setSilenceDetected(false);\r\n      setSilenceStartTime(null);\r\n    }\r\n    \r\n    requestAnimationFrame(monitorAudioLevel);\r\n  };\r\n\r\n  const saveAndSendAudio = async (chunks) => {\r\n    if (!chunks || chunks.length === 0) return;\r\n    \r\n    try {\r\n      setIsLoading(true);\r\n      setProgress('Converting audio to WAV format...');\r\n      const wavBlob = await convertToWav(chunks, audioContextRef.current?.sampleRate || AUDIO_CONFIG.SAMPLE_RATE);\r\n      \r\n      setProgress('Sending audio to server...');\r\n      const formData = new FormData();\r\n      formData.append('audio', wavBlob, `recording.wav`);\r\n      \r\n      const response = await fetch(`${AUDIO_CONFIG.BACKEND_URL}${AUDIO_CONFIG.API_ENDPOINTS.UPLOAD}`, {\r\n        method: 'POST',\r\n        body: formData,\r\n      });\r\n      \r\n      if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);\r\n      \r\n      const result = await response.json();\r\n      if (result.session_id) {\r\n        setSessionId(result.session_id);\r\n        setProgress('Processing audio...');\r\n        await pollTranscription(result.session_id);\r\n      }\r\n      \r\n      setAudioChunks([]);\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n      setProgress('Error processing audio');\r\n    } finally {\r\n      setIsLoading(false);\r\n      setTimeout(() => setProgress(''), 3000); // Clear progress after 3 seconds\r\n    }\r\n  };\r\n\r\n  const pollTranscription = async (sid) => {\r\n    try {\r\n      const response = await fetch(`${AUDIO_CONFIG.BACKEND_URL}${AUDIO_CONFIG.API_ENDPOINTS.TRANSCRIPTION}/${sid}`);\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setTranscription(data);\r\n        setProgress(`Transcription completed in ${data.processing_time.toFixed(2)}s\\nTTS generated in ${data.tts_time.toFixed(2)}s`);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching transcription:', error);\r\n      setProgress('Error fetching transcription');\r\n    }\r\n  };\r\n\r\n  const playTTSAudio = async () => {\r\n    if (!transcription?.tts_audio) return;\r\n    \r\n    try {\r\n      if (!audioPlayerRef.current) {\r\n        const audioUrl = `${AUDIO_CONFIG.BACKEND_URL}${AUDIO_CONFIG.API_ENDPOINTS.TTS}/${transcription.tts_audio}`;\r\n        audioPlayerRef.current = new Audio(audioUrl);\r\n      }\r\n      \r\n      setIsPlaying(true);\r\n      await audioPlayerRef.current.play();\r\n      \r\n      audioPlayerRef.current.onended = () => {\r\n        setIsPlaying(false);\r\n      };\r\n    } catch (error) {\r\n      console.error('Error playing TTS:', error);\r\n      setIsPlaying(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      if (isRecording) {\r\n        stopRecording();\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"audio-recorder\">\r\n      <button \r\n        className={`record-button ${isRecording ? 'recording' : ''}`}\r\n        onClick={toggleRecording}\r\n      >\r\n        {isRecording ? <FaMicrophoneSlash /> : <FaMicrophone />}\r\n      </button>\r\n      <div className=\"status\">\r\n        {isRecording ? (\r\n          <span className=\"recording-indicator\">\r\n            Recording {silenceDetected ? '(Silence detected)' : ''}\r\n          </span>\r\n        ) : (\r\n          <span>Click to start recording</span>\r\n        )}\r\n      </div>\r\n      \r\n      {progress && (\r\n        <div className=\"progress-info\">\r\n          {progress}\r\n        </div>\r\n      )}\r\n      \r\n      {transcription && (\r\n        <div className=\"transcription-section\">\r\n          <div className=\"processing-info\">\r\n            <p>Audio Duration: {transcription.duration?.toFixed(2)}s</p>\r\n            <p>Processing Time: {transcription.processing_time?.toFixed(2)}s</p>\r\n            <p>TTS Generation Time: {transcription.tts_time?.toFixed(2)}s</p>\r\n          </div>\r\n          <p className=\"transcription-text\">{transcription.text}</p>\r\n          <button \r\n            className={`tts-button ${isPlaying ? 'playing' : ''}`}\r\n            onClick={playTTSAudio}\r\n            disabled={isPlaying || isLoading}\r\n          >\r\n            {isLoading ? <FaSpinner className=\"spinner\" /> : <FaPlay />}\r\n            {isPlaying ? 'Playing...' : 'Play TTS'}\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AudioRecorder;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}